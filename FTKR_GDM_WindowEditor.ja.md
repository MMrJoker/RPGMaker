[トップページに戻る](README.md)

# [FTKR_GDM_WindowEditor](FTKR_GDM_WindowEditor.js) プラグイン

トリアコンタンさん製作のGUI画面デザインプラグイン(GraphicalDesignMode.js)の機能拡張プラグインです。<br>
オリジナルのウィンドウやシーンを作成できます。

ダウンロード: [FTKR_GDM_WindowEditor.js](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_GDM_WindowEditor.js)

# 目次

以下の項目の順でプラグインの使い方を説明します。
1. [概要](#概要)
2. [プラグインの登録](#プラグインの登録)
3. [操作方法](#操作方法)
3. [ウィンドウの作成](#ウィンドウの作成)
3. [ウィンドウの設定変更](#ウィンドウの設定変更)
    1. [ウィンドウの編集](#ウィンドウの編集)
    1. [ウィンドウの表示内容変更](#ウィンドウの表示内容変更)
    1. [コモンテキスト編集](#コモンテキスト編集)
    1. [コマンド個別編集](#コマンド個別編集)
3. [ウィンドウの削除](#ウィンドウの削除)
4. [コマンド等の実行処理内容の編集](#コマンド等の実行処理内容の編集)
* [プラグインの更新履歴](#プラグインの更新履歴)
* [ライセンス](#ライセンス)

# 概要

トリアコンタンさん製作のGUI画面デザインプラグイン(GraphicalDesignMode.js)のデザインモードを利用し、既存のウィンドウのより詳細な編集や、新規ウィンドウの追加を行います。

[GraphicalDesignMode.js(トリアコンタンさんのHPリンク)](https://triacontane.blogspot.jp/2016/03/gui.html)

[目次に戻る](#目次)

# プラグインの登録

このプラグインを使用するためには、`GraphicalDesignMode.js`プラグインが必要です。
プラグイン管理画面で、以下の順の配置になるように登録してください。
```
GraphicalDesignMode.js
FTKR_GDM_WindowEditor.js
```

また、[FTKR_CustomSimpleActorStatus_3](https://raw.githubusercontent.com/futokoro/RPGMaker/master/FTKR_CustomSimpleActorStatus_3.js)プラグインと組み合わせることで、ウィンドウにアクター画像やパラメータなどの詳細な表示設定が可能です。<br>
プラグイン管理画面で、以下の順の配置になるように登録してください。
```
GraphicalDesignMode.js
FTKR_CustomSimpleActorStatus_3.js
FTKR_GDM_WindowEditor.js
```

このプラグインは、[FTKR_OriginalSceneWindow](FTKR_OriginalSceneWindow.js)と組み合わせて使用できません。<br>
ただし、FTKR_OriginalSceneWindowプラグイン用のプラグインコマンドは使用できます。

[目次に戻る](#目次)

# 操作方法

## GraphicalDesignMode.jsからの変更点

### 右クリックでウィンドウ枠を非表示にする機能の無効化
この機能は、編集メニューの中の設定項目にあります。

変更したいウィンドウ上で右クリック ＞「表示」＞「表示設定」＞「枠非表示」OFF

### ウィンドウ枠をドラッグ＆ドロップでウィンドウサイズを変更
ウィンドウ枠にマウスポインタを合わせると、下の図のようにカーソルを表示します。

![画像](image/FTKR_GDM_WE/n01_001.png)

この状態で、ドラッグ＆ドロップを行うと、そのままウィンドウサイズを変更できます。<br>
Ctrlキーを押しながら行うと、グリッドに合わせてサイズ変更できます。

![画像](image/FTKR_GDM_WE/n01_002.png)

## 編集メニューの操作

デザインモード中に表示する編集メニューでは、以下のキーで操作可能です。

| キー | 対象 | 結果 |
| --- | --- | --- |
| ↑ | すべて | カーソルを上に移動 |
| ↓ | すべて | カーソルを下に移動 |
| ← | 数値<br>ON/OFF<br>リスト | 値を -1<br>ON/OFF切替<br>リストを1つ戻す |
| shift + ← | 数値 | 値を -10 |
| → | 数値<br>ON/OFF<br>リスト | 値を +1<br>ON/OFF切替<br>リストを1つ進める |
| shift + → | 数値 | 値を +10 |
| 決定 | コマンド<br>コマンド以外 | 次のウィンドウを表示<br>ダイアログボックスを表示し、直接入力 |

![画像](image/FTKR_GDM_WE/n04_110.png)

[目次に戻る](#目次)

# ウィンドウの作成

画面上で「ウィンドウがない部分」を「右クリック」してメニューを表示

![画像](image/FTKR_GDM_WE/n03_001.png)

「作成」コマンドを選択し決定<br>
以下の３種類のウィンドウを追加する
1. コモンウィンドウ
1. コマンドウィンドウ
1. セレクトウィンドウ

![画像](image/FTKR_GDM_WE/n03_002.png)

[目次に戻る](#目次)

# ウィンドウの設定変更

画面上で「編集したいウィンドウ上」を「右クリック」してメニューを表示

「作成」コマンドがグレー表示になり、替わりに「編集」「表示」コマンドが選択可能

![画像](image/FTKR_GDM_WE/n04_000.png)

## ウィンドウの編集

「編集」コマンドを選択すると編集メニューを表示

このメニューからは以下の編集が可能
* [ウィンドウ](#ウィンドウ)
* [フォント設定](#フォント設定)
* [行列設定](#行列設定)
* [処理設定](#処理設定)

![画像](image/FTKR_GDM_WE/n04_100.png)

[目次に戻る](#目次)

### ウィンドウ

「ウィンドウ」を選択すると、以下の設定を変更可能

* 名前・・・「文字列」ウィンドウごとに個別の名前を設定可能
* X座標・・・「数値」
* Y座標・・・「数値」
* 横幅・・・「数値」
* 高さ・・・「数値」
* 余白・・・「数値」ウィンドウの枠と内側の表示部分の余白サイズを指定

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_110.png)

[上に戻る](#ウィンドウの編集)　　　[目次に戻る](#目次)

### フォント設定

「フォント設定」を選択すると、以下の設定を変更可能

* フォント・・・※未実装※
* フォントサイズ・・・「数値」

(*1) フォントデータが別途必要です

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_120.png)

[上に戻る](#ウィンドウの編集)　　　[目次に戻る](#目次)

### 行列設定

「行列設定」を選択すると、以下の設定を変更可能

* 行高さ・・・「数値」
* 表示行数・・・「数値」
* 表示列数・・・「数値」コマンドやセレクトリストを横に並べる数
* 表示列間隔・・・「数値」
* カーソル行数・・・「数値」

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_130.png)

[上に戻る](#ウィンドウの編集)　　　[目次に戻る](#目次)

### 処理設定

「処理設定」を選択すると、以下の設定を変更可能

* 実行内容・・・そのウィンドウがアクティブ状態の時に、「決定」ボタンを押したときの処理
  * 実行設定・・・「リスト」詳細は[処理内容](#コマンド等の実行処理内容の編集)を参照
  * 実行詳細・・・「リスト」
* キャンセル内容・・・そのウィンドウがアクティブ状態の時に、「キャンセル」ボタンを押したときの処理
  * キャンセル設定・・・「リスト」詳細は[処理内容](#コマンド等の実行処理内容の編集)を参照
  * キャンセル詳細・・・「リスト」

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_140.png)

[上に戻る](#ウィンドウの編集)

[目次に戻る](#目次)

## ウィンドウの表示内容変更

「表示」コマンドを選択すると表示内容変更メニューを表示

このメニューからは以下の編集が可能
* [背景](#背景)
* [表示設定](#表示設定)
* [コマンド設定](#コマンド設定)
* [セレクト設定](#セレクト設定)
* [コモン設定](#コモン設定)
* [表示エリア](#表示エリア)
* [配置](#配置)

コマンドウィンドウの場合

![画像](image/FTKR_GDM_WE/n04_200.png)

コモンウィンドウ(表示エリア有効)の場合

![画像](image/FTKR_GDM_WE/n04_201.png)

セレクトウィンドウの場合

![画像](image/FTKR_GDM_WE/n04_202.png)

### 背景

「背景」を選択すると、以下の設定を変更可能

* 背景透明度・・・「数値」
* 背景画像・・・※未実装※

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_210.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### 表示設定

「表示設定」を選択すると、以下の設定を変更可能

* 表示スイッチ・・・スイッチを指定すると、そのスイッチがONの時のみこのウィンドウを表示する
* 枠非表示・・・「ON/OFF」

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_220.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### コマンド設定

「コマンド設定」を選択すると、以下の設定を変更可能

* コマンド表示位置・・・「リスト」コマンド名をどちら側に寄せて表示するか指定する
* コマンド非表示解除・・・「コマンド」選択すると非表示にしていたコマンドをすべて表示する

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_230.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### セレクト設定

「セレクト設定」を選択すると、以下の設定を変更可能

* 表示タイプ・・・「リスト」そのセレクトウィンドウでどのデータベースを表示するか選択
* リストタイプ・・・「リスト」表示タイプで「パーティー」を選択した時に、設定可能
* 表示条件・・・「文字列」スクリプト形式で表示する条件を指定可能

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_240.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### コモン設定

「コモン設定」を選択すると、以下の設定を変更可能

* 表示タイプ・・・「リスト」
  * テキスト：任意の文字列を表示
  * 詳細：FTKR_CustomSimpleActorStatusによる表示設定が可能
* アクター設定・・・「リスト」表示タイプを詳細にした場合に、データ参照元のアクターを選択
* セレクト参照・・・「数値」※未実装※

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_250.png)

表示タイプを詳細にした場合

![画像](image/FTKR_GDM_WE/n04_251.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### 表示エリア

「表示エリア」を選択すると、以下の設定を変更可能

FTKR_CustomSimpleActorStatusプラグインの仕様に従い、表示エリアの設定を行う

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_260.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

### 配置

「配置」を選択すると、以下の設定を変更可能

「コマンド」ウィンドウ同士が重なった時に、手前に表示するか後ろに隠れるかの配置を変更可能

![画像](image/FTKR_GDM_WE/n04_270.png)

[上に戻る](#ウィンドウの表示内容変更)　　　[目次に戻る](#目次)

## コモンテキスト編集

コモンウィンドウで、表示タイプをテキストにした場合

ウィンドウ上で左クリックすると、表示する文字列（テキスト）などを編集可能

* テキスト編集・・・ダイアログボックスで直接表示させたい文章を設定可能、制御文字も使用可能
* 表示順番
* テキスト追加・・・表示行数を増やす
* テキスト削除

![画像](image/FTKR_GDM_WE/n04_301.png)

テキスト編集

![画像](image/FTKR_GDM_WE/n04_302.png)

[目次に戻る](#目次)

## コマンド個別編集

コマンドウィンドウ上で左クリックすると、コマンドの表示や処理を編集可能

* [コマンド編集](#コマンド編集)
* [表示順番](#表示順番)
* コマンド追加
* コマンド非表示・・・編集メニューの非表示解除で表示を戻せます
* コマンド削除・・・一度削除すると戻せません

![画像](image/FTKR_GDM_WE/n04_400.png)

### コマンド編集

「コマンド編集」を選択すると、以下の設定を変更可能

* 表示名・・・「文字列」コマンドの表示名を変更、データベースの用語よりも優先
* 表示条件・・・「文字列」スクリプトで条件を指定すると、その条件を満たしている間だけそのコマンドを表示
* 実行設定・・・「リスト」なし以外にすると、そのコマンドを選択した時の処理を変更可能、詳細は[処理内容](#コマンド等の実行処理内容の編集)を参照
* 実行詳細・・・「リスト」
* 実行詳細2・・・「リスト」

内容変更後、「決定」を選択するとウィンドウに反映。

![画像](image/FTKR_GDM_WE/n04_410.png)

[上に戻る](#コマンド個別編集)　　　[目次に戻る](#目次)

### 表示順番

「表示順番」を選択すると、以下の設定を変更可能

コマンドの表示位置を変更する

![画像](image/FTKR_GDM_WE/n04_420.png)

[上に戻る](#コマンド個別編集)　　　[目次に戻る](#目次)

# ウィンドウの削除

このプラグインで作成したウィンドウの場合は、削除が可能。

![画像](image/FTKR_GDM_WE/n05_000.png)

[目次に戻る](#目次)

# コマンド等の実行処理内容の編集

処理内容として設定可能なものは以下の通り。
* シーン終了
* シーン変更
* コモンイベント
* ウィンドウアクティブ

### シーン終了
実行すると、シーンを終了して元のシーンに戻ります。
オリジナルシーンやメニューシーンなどから、マップシーンに戻すときに使用します。

このメソッドは、タイトルシーンとマップシーン上で使わないでください。

![画像](image/FTKR_GDM_WE/n04_141.png)

[上に戻る](#コマンド等の実行処理内容の編集)　　　[目次に戻る](#目次)

### シーン変更
実行すると、指定したシーンを表示します。

sceneの例)
* Scene_Item  - アイテムシーン(*1)
* Scene_Skill - スキルシーン(*1)
* Scene_Save - セーブシーン(*1)
* Scene_Load - ロード(コンティニュー)シーン(*2)
* Scene_Options - オプションシーン(*2)
* Scene_OSW - オリジナルシーン

(*1) メニュー画面から表示するシーンと同じです。<br>
(*2) スタート画面から表示するシーンと同じです。

![画像](image/FTKR_GDM_WE/n04_142.png)

[上に戻る](#コマンド等の実行処理内容の編集)　　　[目次に戻る](#目次)

### コモンイベント
実行すると、指定したコモンイベント実行します。
コモンイベントが実行可能なシーンのみ有効です。

「詳細」で、コモンイベントを指定します。

選択すると、選択したリストの番号(先頭が0番)を記録します。
記録した番号は、以下のスクリプトで取得できます。
`$gameOswData._oswIndex`

また、選択したリストのデータは、以下のスクリプトで取得できます。（セレクトウィンドウのみ）
`$gameOswData._oswItem`

例)リストがアイテムの場合は、選択したアイテムの`$dataItems[n]`のデータが格納されます。(n:アイテムID)

![画像](image/FTKR_GDM_WE/n04_143.png)

[上に戻る](#コマンド等の実行処理内容の編集)　　　[目次に戻る](#目次)

### ウィンドウアクティブ

実行すると、このウィンドウのから、指定したウィンドウにカーソル操作が移ります。

「詳細」で、ウィンドウを指定します。<br>
コマンドウィンドウかセレクトウィンドウを指定してください。

![画像](image/FTKR_GDM_WE/n04_144.png)

[上に戻る](#コマンド等の実行処理内容の編集)　　　[目次に戻る](#目次)

# プラグインの更新履歴

| バージョン | 公開日 | 更新内容 |
| --- | --- | --- |
| [0.9.0](FTKR_GDM_WindowEditor.js) | 2018/07/15 | 仮版公開 |

# ライセンス

本プラグインはMITライセンスのもとで公開しています。

[The MIT License (MIT)](https://opensource.org/licenses/mit-license.php)

#
[目次に戻る](#目次)

[トップページに戻る](README.md)